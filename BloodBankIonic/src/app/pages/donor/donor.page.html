<app-header></app-header>

<ion-content [fullscreen]="true">

  <div class="container">
    <div style="margin-top: 10px;">
        <div class="toggle_button font-size-15"> ADD DONOR
          <button type="button" class="btn-2" (click)="openModalDialog()"><ion-icon name="add"></ion-icon></button>
      </div>
    </div>

  <div style="margin-top: 10px;"></div>
  
  <table class="table table-striped box-shadow">
    <thead class="thead-dark">
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Blood Group</th>
        <th>Date of Registration</th>
        <th>Address</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody *ngFor="let donor of GetAllDonorList; let ndx = index">
      <tr>
        <td> {{ndx + 1 | number}} </td>
        <td> {{donor.name}} </td>
        <td> {{donor.blood_group}} </td>
        <td> {{donor.date_of_reg | date : mediumDate}} </td>
        <td> {{donor.address}}, {{donor.city}} </td>
        <td><button ><ion-icon name="create-outline"></ion-icon></button></td>
      </tr>
    </tbody>
  </table>
</div>

  <!------------------------------- Donor Add Modal Open ----------------------------------->
  <div class="modal" id="custom-modal-1" tabindex="-1" role="dialog" [ngStyle]="{'display':display}">
    <div class="modal-dialog" role="document" style="margin-top: 90px;">

      <form [formGroup]="service.donorModel" autocomplete="off" (submit)="onSubmit()">  
        <div class="modal-content box-shadow">

         <div class="modal-header"> Add Donor
            <button type="button" class="close btn-3" aria-label="Close" (click)="closeModalDialog()"><span aria-hidden="true">&times;</span></button>
          </div>
  
        <div class="modal-body">
          <div class="row">
              <div class="col-sm-3 col-xs-3">
                  <label> Name:<span style="color: red;">*</span></label>
              </div>
              <div class="col-sm-9 col-xs-9 mr-b-20">
                  <input type="text" class="form-control" placeholder="Name" formControlName="name"/>
                  <label class="text-danger" *ngIf="service.donorModel.get('name').touched && service.donorModel.get('name').errors?.required"> Name is required. </label>
              </div>

              <div class="col-sm-3 col-xs-3">
                <label> DOB: <span style="color: red;">*</span></label>
              </div>
              <div class="col-sm-9 col-xs-9 mr-b-20">
                  <input type="text" class="form-control" placeholder="dob" formControlName="dob" />
                  <!-- <input matInput [matDatepicker]="picker" type="text" class="form-control" placeholder="dd/mm/yyyy" formControlName="dob" (focus)="picker.open()" required/> -->
                  <!-- <label class="text-danger" *ngIf="service.donorModel.get('dob').touched && service.donorModel.get('dob').errors?.required"> DOB is required. </label> -->
              </div>

              <div class="col-sm-3 col-xs-3">
                <label> Registration Date:<span style="color: red;">*</span></label>
            </div>
            <div class="col-sm-9 col-xs-9 mr-b-20">
                <input type="text" class="form-control" placeholder="Date" formControlName="regDate" />
                <!-- <label class="text-danger" *ngIf="service.donorModel.get('date_of_reg').touched && service.donorModel.get('date_of_reg').errors?.required"> Name is required. </label> -->
            </div>

            <div class="col-sm-3 col-xs-3">
              <label> Blood Group: <span style="color: red;">*</span></label>
            </div>
            <div class="col-sm-9 col-xs-9 mr-b-20">
                <input type="text" class="form-control" placeholder="Blood Group" formControlName="bloodGroup"  />
                <label class="text-danger" *ngIf="service.donorModel.get('bloodGroup').touched && service.donorModel.get('bloodGroup').errors?.required"> Blood Group is required. </label>
            </div>

          <div class="col-sm-3 col-xs-3">
              <label> Address:<span style="color: red;">*</span></label>
          </div>
          <div class="col-sm-9 col-xs-9 mr-b-20">
              <input type="text" class="form-control" placeholder="Address" formControlName="address" />
              <label class="text-danger" *ngIf="service.donorModel.get('address').touched && service.donorModel.get('address').errors?.required"> Address is required. </label>
          </div>

          <div class="col-sm-3 col-xs-3">
            <label> City: <span style="color: red;">*</span></label>
          </div>
          <div class="col-sm-9 col-xs-9 mr-b-20">
              <input type="text" class="form-control" placeholder="City" formControlName="city" />
              <label class="text-danger" *ngIf="service.donorModel.get('city').touched && service.donorModel.get('city').errors?.required"> City is required. </label>
          </div>

          <div class="col-sm-3 col-xs-3">
            <label> Pin Code: <span style="color: red;">*</span></label>
          </div>
          <div class="col-sm-9 col-xs-9 mr-b-20">
              <input type="text" class="form-control" placeholder="Pin Code" formControlName="pincode" />
              <label class="text-danger" *ngIf="service.donorModel.get('pincode').touched && service.donorModel.get('pincode').errors?.required"> Pin code is required. </label>
          </div>
            
          </div>
        </div>
  
        <div class="modal-footer">
          <ion-button type="button" (click)="resetDonorForm()"> Reset </ion-button>
          <ion-button type="submit" [disabled]="!service.donorModel.valid"> Submit </ion-button>
        </div>
      </div>  
    </form>
    </div>
  </div> 
  <!------------------------------- Donor Add Modal Close ----------------------------------->

<div class="container mr-b-20" *ngIf="addDonor">
  <form [formGroup]="service.donorModel" autocomplete="off" (submit)="onSubmit()">  
    <div class="modal-content box-shadow">

     <div class="hd1"> Donor
      <button type="button" class="close btn-3 mr-0-6" aria-label="Close" (click)="closeModalDialog()"><span aria-hidden="true">&times;</span></button>
    </div>

    <div class="" >
      <div class="container">
        <div class="row mr-20px">
          <div class="col-sm-2 col-md-2 col-xs-2">
              <label> Name:<span style="color: red;">*</span></label>
          </div>
          <div class="col-sm-4 col-md-4 col-xs-4 mr-b-20">
              <input type="text" class="form-control" placeholder="Name" formControlName="name" />
              <label class="text-danger" *ngIf="service.donorModel.get('name').touched && service.donorModel.get('name').errors?.required"> Name is required. </label>
          </div>

          <div class="col-sm-2 col-md-2 col-xs-2">
            <label> DOB: <span style="color: red;">*</span></label>
          </div>
          <div class="col-sm-4 col-md-4 col-xs-4 mr-b-20">
            <input matInput [matDatepicker]="picker1" class="form-control" placeholder="mm/dd/yyyy" formControlName="dob" (focus)="picker1.open()"/>
            <label class="text-danger" *ngIf="service.donorModel.get('dob').touched && service.donorModel.get('dob').errors?.required"> DOB is required. </label>
            <mat-datepicker-toggle matSuffix [for]="picker1" class="date-picker"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </div>

          <div class="col-sm-2 col-md-2 col-xs-2">
            <label> Registration Date:<span style="color: red;">*</span></label>
        </div>
        <div class="col-sm-4 col-md-4 col-xs-4 mr-b-20">
            <input matInput [matDatepicker]="picker2" class="form-control" placeholder="mm/dd/yyyy" formControlName="regDate" (focus)="picker2.open()"/>
            <label class="text-danger" *ngIf="service.donorModel.get('regDate').touched && service.donorModel.get('regDate').errors?.required"> Date is required. </label>
            <mat-datepicker-toggle matSuffix [for]="picker2" class="date-picker"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
        </div>

        <div class="col-sm-2 col-md-2 col-xs-2">
          <label> Blood Group: <span style="color: red;">*</span></label>
        </div>
        <div class="col-sm-4 col-md-4 col-xs-4 mr-b-20">
            <input type="text" class="form-control" placeholder="Blood Group" formControlName="bloodGroup" pattern="(A|B|AB|O)[+-]"/>
            <label class="text-danger" *ngIf="service.donorModel.get('bloodGroup').touched && service.donorModel.get('bloodGroup').errors?.required"> Blood Group is required. </label>
            <label class="text-danger" *ngIf="service.donorModel.get('bloodGroup').errors?.pattern"> Please provide correct blood group. </label>
        </div>

      <div class="col-sm-2 col-md-2 col-xs-2">
          <label> Address:<span style="color: red;">*</span></label>
      </div>
      <div class="col-sm-4 col-md-4 col-xs-4 mr-b-20">
          <input type="text" class="form-control" placeholder="Address" formControlName="address" />
          <label class="text-danger" *ngIf="service.donorModel.get('address').touched && service.donorModel.get('address').errors?.required"> Address is required. </label>
      </div>

      <div class="col-sm-2 col-md-2 col-xs-2">
        <label> City: <span style="color: red;">*</span></label>
      </div>
      <div class="col-sm-4 col-md-4 col-xs-4 mr-b-20">
          <input type="text" class="form-control" placeholder="City" formControlName="city" maxlength="30"/>
          <label class="text-danger" *ngIf="service.donorModel.get('city').touched && service.donorModel.get('city').errors?.required"> City is required. </label>
          <label class="text-danger" *ngIf="service.donorModel.errors?.maxlength"> Maximum 30 character allowed.</label>
      </div>

      <div class="col-sm-2 col-md-2 col-xs-2">
        <label> Pin Code: <span style="color: red;">*</span></label>
      </div>
      <div class="col-sm-4 col-md-4 col-xs-4 mr-b-20">
          <input type="text" class="form-control" placeholder="Pin Code" formControlName="pincode" />
          <label class="text-danger" *ngIf="service.donorModel.get('pincode').touched && service.donorModel.get('pincode').errors?.required"> Pin code is required. </label>
      </div>
    </div>   
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn btn-secondary" type="button" (click)="resetDonorForm()"> Reset </button>
      <button class="btn btn-success" type="submit" [disabled]="!service.donorModel.valid"> Submit </button>
    </div>
  </div>  
</form>
</div>

</ion-content>
